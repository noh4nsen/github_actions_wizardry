name: ~ Reusable Workflow
on:
    workflow_call:
        inputs:
            name:
                type: string
                required: true
        outputs:
            date:
                description: 'Date value'
                value: ${{ jobs.generate-output.outputs.date }}
            message:
                description: 'Message generated by nested workflow'
                value: ${{ jobs.generate-message.outputs.message }}

jobs:
    generate-output:
        runs-on: ubuntu-latest
        outputs:
            date: ${{ steps.date-step.outputs.date }}
        steps:
            - run: echo "date=$(date)" >> $GITHUB_OUTPUT
              id: date-step
    nested-worklow:
        uses: ./.github/workflows/04-nested-reusable-workflow.yml
    generate-message:
        needs: [generate-output, nested-worklow]
        runs-on: ubuntu-latest
        outputs:
            message: ${{ steps.create-message.outputs.message }}
        steps:
            - id: create-message
              run: |
                echo "message='DATE >> ${{ needs.generate-output.outputs.date }} :: ${{ needs.nested-workflow.outputs.message }}'" >> $GITHUB_OUTPUT